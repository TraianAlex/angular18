<div class="relative mb-4">
  <input
    class="border border-gray-300 rounded-md px-4 py-2 pr-10 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
    type="text"
    [value]="searchQuery()"
    (input)="searchQuery.set($event.target.value)"
    placeholder="Search todos..."
  />
  @if (searchQuery()) {
  <button
    type="button"
    (click)="searchQuery.set('')"
    class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors"
    aria-label="Clear search"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </button>
  }
</div>

@if(todos.hasValue()) {
<ul>
  @for(todo of todos.value(); track todo.id){
  <li class="border border-gray-300 rounded-md p-2 mb-2 flex items-center justify-between">
    <input
      type="checkbox"
      [checked]="todo.completed"
      (change)="toggleTodo(todo.id)"
      class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer me-2"
    />
    <span [class.line-through]="todo.completed">{{ todo.title }}</span>
    <div>
      <button type="button" class="bg-red-500 text-white px-2 py-1 rounded-md" (click)="deleteTodo(todo.id)">
        Delete
      </button>
    </div>
  </li>
  }
</ul>
} @else if (todos.error()) {
<div>Error occured while loading todos</div>
} @else if (todos.isLoading()) {
<div>Loading todos...</div>
}

<button type="button" class="bg-blue-500 text-white px-4 py-2 rounded-md me-2" (click)="todos.reload()">Reload</button>
<button type="button" class="bg-blue-500 text-white px-4 py-2 rounded-md me-2" (click)="resetTodos()">Clear</button>
<button type="button" class="bg-blue-500 text-white px-4 py-2 rounded-md" (click)="addTodo()">Add Todo</button>
